#compdef _options options

_options() {
  local line state

  _arguments -C  \
    '(-d --debug)'{-d,--debug}$'[Enable debug mode]'  \
    '(-o --output-path)'{-o,--output-path}$'[Write output to file, not stdout]':FILE  \
    '(-C --color)'{-C,--color}$'[Enable ANSI color output]'  \
    '(-N --no-color)'{-N,--no-color}$'[Disable ANSI color output]'  \
    '(-h --help)'{-h,--help}$'[This command summary]'  \
    "1: :->cmds" \
    "*::args:->args"

   case "$state" in
     cmds)
        _values "options command"  \
            "completions[Generate zsh command completions]"  \
            "help[List available commands]" 
        ;;
     args)
       case $line[1] in 
         completions) _options_completions ;;

         help) _options_help ;;

       esac
       ;;
   esac
}
_options_completions() {
    _arguments -s  \
      '(-h --help)'{-h,--help}$'[This command summary]' 
}

_options_help() {
    _arguments -s  \
      '(-c --commands)'{-c,--commands}$'[Print commands: all, none, root]':FILTER  \
      '(-h --help)'{-h,--help}$'[This command summary]' 
}

